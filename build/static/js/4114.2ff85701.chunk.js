"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4114],{24114:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(9950),a=t(37017),l=t(1072),i=t(44885),o=t(44414);const c=()=>{const[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)([]),[n,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),{selectedColor:u}=(0,i.useColor)(),j=(0,l.A)();(0,r.useEffect)((()=>{b()}),[]);const b=async()=>{try{let e=await j.get("ticket/user_machine_mapped/");console.log(e,"ressoponsee");let t=await j.get("ticket/get_ticket_list_customer/");if(1===e.data.success&&1===t.data.success){const r=t.data.result.map(((e,s)=>({sr_no:s+1,ticket_no:e.ticsrno,date:y(e.created_at),time:_(e.created_at),title:e.title,machine_map:e.machine_map,priority:e.priority,status:e.status,problem_type:e.problem_type,description:e.description}))),a=e.data.result.map((e=>({value:e.machine_id,label:"".concat(e.machine_id)})));console.log(a,"datattat"),s(r),c(a)}}catch(e){console.error("Error fetching topics:",e)}},y=e=>{if(!e)return"";const s=new Date(e),t=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),a=s.getFullYear();return"".concat(a,"-").concat(t,"-").concat(r)},_=e=>{if(!e)return"";const s=new Date(e),t=String(s.getHours()).padStart(2,"0"),r=String(s.getMinutes()).padStart(2,"0");return"".concat(t,":").concat(r)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,o.jsx)(a.Q_,{onClick:()=>d(!n),className:"mt-2",style:{backgroundColor:u,color:"white",border:"0px"},children:"Create Ticket"})}),(0,o.jsx)(a.sK,{children:(0,o.jsx)(a.UF,{xs:12,children:(0,o.jsx)(a.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No",_props:{color:"secondary",className:"fw-semibold"}},{key:"ticket_no",label:"Ticket No",_props:{color:"secondary",className:"fw-semibold"}},{key:"date",label:"Date",_props:{color:"secondary",className:"fw-semibold"}},{key:"time",label:"Time",_props:{color:"secondary",className:"fw-semibold"}},{key:"title",label:"Title",_props:{color:"secondary",className:"fw-semibold"}},{key:"machine_map",label:"Machine ID",_props:{color:"secondary",className:"fw-semibold"}},{key:"priority",label:"Priority",_props:{color:"secondary",className:"fw-semibold"}},{key:"status",label:"Status",_props:{color:"secondary",className:"fw-semibold"}},{key:"problem_type",label:"Problem Type",_props:{color:"secondary",className:"fw-semibold"}},{key:"description",label:"Description",_props:{color:"secondary",className:"fw-semibold"}}],items:e,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,s)=>(0,o.jsx)("td",{children:s+1})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})]}),(0,o.jsxs)(a.zS,{size:"lg",visible:n,onClose:()=>{d(!1),p(!1),x(!1)},backdrop:"static",children:[(0,o.jsx)(a.E4,{onClose:()=>{d(!1),p(!1),x(!1)},style:{backgroundColor:u,color:"white"},children:(0,o.jsx)(a.lb,{children:"Create Ticket"})}),(0,o.jsxs)(a.qI,{className:"needs-validation mt-4",noValidate:!0,validated:m,onSubmit:async e=>{const s=e.currentTarget;if(e.preventDefault(),!0===s.checkValidity()){const s=new FormData(e.target);let t=await j.post("/ticket/create_ticket/",s);1===t.data.success?(alert("Ticket is Created"),p(!1),d(!1),b(),window.location.reload()):t.data.result&&Object.values(t.data.result).forEach(alert)}else p(!0)},children:[(0,o.jsx)(a.Tc,{children:(0,o.jsxs)(a.sK,{className:"justify-content-center mx-4",children:[(0,o.jsxs)(a.sK,{children:[(0,o.jsxs)(a.UF,{sm:6,children:[(0,o.jsxs)(a.A6,{htmlFor:"title",children:["Title",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(a.OG,{type:"text",id:"title",name:"title",required:!0,pattern:"[A-Za-z\\s]+",maxLength:50}),(0,o.jsx)(a.To,{invalid:!0,children:"Please enter the title"})]}),(0,o.jsxs)(a.UF,{sm:6,children:[(0,o.jsxs)(a.A6,{htmlFor:"machine_map",children:["Machine ID",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(a.MT,{name:"machine_map",id:"machine_map",options:t,required:!0}),(0,o.jsx)(a.To,{invalid:!0,children:"Please select Machine ID"})]})]}),(0,o.jsxs)(a.sK,{children:[(0,o.jsxs)(a.UF,{sm:6,children:[(0,o.jsxs)(a.A6,{htmlFor:"problem_type",children:["Problem Type",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)(a.MT,{name:"problem_type",id:"problem_type",required:!0,children:[(0,o.jsx)("option",{children:"Choose..."}),(0,o.jsx)("option",{value:"software",children:"Software"}),(0,o.jsx)("option",{value:"hardware",children:"Hardware"}),(0,o.jsx)("option",{value:"other",children:"Other"})]}),(0,o.jsx)(a.To,{invalid:!0,children:"Please select Problem type"})]}),(0,o.jsxs)(a.UF,{sm:6,children:[(0,o.jsxs)(a.A6,{htmlFor:"priority",children:["Priority",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)(a.MT,{name:"priority",id:"priority",required:!0,children:[(0,o.jsx)("option",{children:"Choose..."}),(0,o.jsx)("option",{value:"low",children:"Low"}),(0,o.jsx)("option",{value:"medium",children:"Medium"}),(0,o.jsx)("option",{value:"high",children:"High"})]}),(0,o.jsx)(a.To,{invalid:!0,children:"Please select Priority"})]})]}),(0,o.jsx)(a.sK,{children:(0,o.jsxs)(a.UF,{sm:6,children:[(0,o.jsxs)(a.A6,{htmlFor:"description",children:["Description",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(a.Im,{type:"text",id:"description",name:"description",rows:3,required:!0,maxLength:200}),(0,o.jsx)(a.To,{invalid:!0,children:"Please enter the description"})]})})]})}),(0,o.jsxs)(a.If,{children:[(0,o.jsx)(a.Q_,{onClick:()=>{d(!1),p(!1),x(!1)},style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,o.jsx)(a.Q_,{type:"submit",style:{backgroundColor:u,color:"white"},children:"\xa0Submit"})]})]})]})]})}}}]);