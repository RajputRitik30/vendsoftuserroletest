"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5599],{65599:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var l=s(9950),a=s(28429),o=s(42074),i=s(45532),r=(s(96011),s(27760)),c=s(37017),n=(s(79988),s(7864)),d=s(1072),p=s(44885),m=s(44414);const h=()=>{(0,a.Zp)();const{user:e,authTokens:t}=(0,l.useContext)(i.A),[s,h]=(0,l.useState)([]),[u,b]=(0,l.useState)([]),[x,y]=(0,l.useState)([]),[_,g]=(0,l.useState)([]),[k,j]=(0,l.useState)();let S=(0,d.A)(),[f,w]=(0,l.useState)([]),[N,C]=(0,l.useState)([]);const[P,v]=(0,l.useState)(!1),[D,E]=(0,l.useState)(!1),[F,R]=(0,l.useState)(!1),[T,A]=(0,l.useState)(!1),{selectedColor:W}=(0,p.useColor)();(0,l.useEffect)((()=>{I()}),[]);let I=async()=>{let e=await S.get("/ticket/get_assigned_tickets");if(1===e.data.success){let t=[],s=[],l=[],a=[];for(let o=0;o<e.data.tickets.length;o++){let i=e.data.tickets[o],r={id:i.id,ticket_no:i.ticsrno,date:L(i.created_at),time:O(i.created_at),title:i.title,machine_id:i.machine_id,priority:i.priority,status:i.status,problem_type:i.problem_type,discription:i.description,email:"a.email",name:"a.name"};"software"==r.problem_type&&t.push(r),"hardware"==r.problem_type&&s.push(r),"other"==r.problem_type&&l.push(r),a.push(r)}b(t),y(s),g(l),h(a)}else 0===e.data.success&&console.log("hhhhhhhhh")};function L(e){if(null!=e){var t=new Date(e),s=""+(t.getMonth()+1),l=""+t.getDate(),a=t.getFullYear();return s.length<2&&(s="0"+s),l.length<2&&(l="0"+l),[a,s,l].join("-")}}const O=e=>{if(null==e)return"          ";const t=new Date(e),s=(String(t.getDate()).padStart(2,"0"),t.getMonth(),t.getFullYear(),String(t.getHours()).padStart(2,"0")),l=String(t.getMinutes()).padStart(2,"0");return"".concat(s,":").concat(l)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("h3",{children:"Ticket History"}),(0,m.jsx)(c.sK,{children:(0,m.jsxs)("div",{className:"d-grid gap-4 d-md-flex justify-content-md-start mt-3 mb-2",children:[(0,m.jsx)(c.Q_,{color:"success",type:"button",className:"btn btn-default btn-sm",onClick:()=>h(u),style:{backgroundColor:W,color:"white",borderRadius:"5px",boxShadow:"3px 3px 3px 1px rgba(0,0,0,0.25)"},children:"Software Problems"}),(0,m.jsx)(c.Q_,{color:"success",type:"button",onClick:()=>h(x),className:"btn btn-default btn-sm ",style:{backgroundColor:W,color:"white",borderRadius:"5px",boxShadow:"3px 3px 3px 1px rgba(0,0,0,0.25)"},children:"Hardware Problems"}),(0,m.jsx)(c.Q_,{onClick:()=>h(_),style:{backgroundColor:W,color:"white",borderRadius:"5px",boxShadow:"3px 3px 3px 1px rgba(0,0,0,0.25)"},children:"Other Problems"})]})}),(0,m.jsx)(c.sK,{children:(0,m.jsx)(c.UF,{xs:12,children:(0,m.jsx)(c.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",_props:{color:"secondary",className:"fw-semibold"}},{label:"Ticket No",key:"ticket_no",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"115px"}},{label:"Date",key:"date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"80px"}},{label:"Time",key:"time",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"20px"}},{label:"Title",key:"title",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Machine ID",key:"machine_id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Priority",key:"priority",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"50px"}},{key:"status",label:"Status",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{key:"problem_type",label:"Problem Type",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"50px"}},{key:"discription",label:"Description",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Action",key:"Action",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"60px"}}],items:s,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{Action:e=>(0,m.jsx)("td",{children:(0,m.jsx)(o.N_,{to:"#",children:(0,m.jsx)(n.A,{icon:r.K,style:{color:"blue"},size:"md",title:"Edit",onClick:()=>[E(!D),j(e.id)]})})}),sr_no:(e,t)=>(0,m.jsx)("td",{children:t+1})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})]}),(0,m.jsxs)(c.zS,{size:"sm",visible:D,onClose:()=>[E(!1),R(!1)],backdrop:"static",children:[(0,m.jsx)(c.E4,{onClose:()=>[E(!1),R(!1)],style:{backgroundColor:W,color:"white"},children:(0,m.jsx)(c.lb,{children:"Update Ticket Status"})}),(0,m.jsxs)(c.qI,{className:"row g-3 needs-validation px-2",style:{align:"center"},noValidate:!0,validated:F,onSubmit:async e=>{const t=e.currentTarget;if(e.preventDefault(),!0===t.checkValidity()){const t=new FormData(e.target);t.append("ticket_id",k);await S.post("/ticket/assigned_update_ticket_status/",t);R(!1),E(!1),alert("ticket status will be updated")}},children:[(0,m.jsx)(c.Tc,{children:(0,m.jsxs)("div",{style:{},children:[(0,m.jsx)(c.sK,{sm:12,className:"",children:(0,m.jsxs)(c.UF,{sm:12,children:[(0,m.jsx)(c.A6,{htmlFor:"validationDefault01",children:"Status"}),(0,m.jsxs)(c.MT,{name:"status",children:[(0,m.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,m.jsx)("option",{value:"IN PROGRESS",children:"IN PROGRESS"}),(0,m.jsx)("option",{value:"RESOLVED",children:"RESOLVED"}),(0,m.jsx)("option",{value:"CLOSED",children:"CLOSED"})]}),(0,m.jsx)(c.To,{invalid:!0,children:"Please select Payment mode"})]})}),(0,m.jsx)(c.sK,{sm:12,children:(0,m.jsxs)(c.UF,{sm:12,children:[(0,m.jsx)(c.A6,{htmlFor:"validationDefault01",children:"Reason"}),(0,m.jsx)(c.Im,{type:"text",id:"solved_status",name:"notes",rows:3,maxLength:200}),(0,m.jsx)(c.To,{invalid:!0,children:"Please enter the description"})]})})]})}),(0,m.jsxs)(c.If,{children:[(0,m.jsx)(c.Q_,{onClick:()=>[E(!1),R(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,m.jsx)(c.Q_,{type:"submit",style:{backgroundColor:W,color:"white"},children:"\xa0Submit"})]})]})]})]})}},27760:(e,t,s)=>{s.d(t,{K:()=>l});const l=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]}}]);