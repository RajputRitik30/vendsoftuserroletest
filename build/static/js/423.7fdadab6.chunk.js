"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[423],{60423:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var l=s(9950),a=s(28429),i=s(45532),r=(s(96011),s(37017)),o=(s(94139),s(1072)),n=s(44885),c=s(44414);const d=()=>{(0,a.Zp)();const{user:e,authTokens:t}=(0,l.useContext)(i.A),[s,d]=(0,l.useState)([]),[h,m]=(0,l.useState)(!1);let u=(0,o.A)(),[p,b]=(0,l.useState)([]),[x,j]=(0,l.useState)([]);const[g,y]=(0,l.useState)(!1),[_,f]=(0,l.useState)(!1),[k,w]=(0,l.useState)(!1),[C,N]=(0,l.useState)(!1),{selectedColor:v}=(0,n.useColor)();(0,l.useEffect)((()=>{P()}),[]);let P=async()=>{let e=await u.get("ticket/user_machine_mapped/"),t=await u.get("ticket/get_ticket_list_customer/");if(console.log(e.data.result.length),1===e.data.success&&1===e.data.success){let s=[],l=[];for(let t=0;t<e.data.result.length;t++){let s=e.data.result[t],a={id:s.id,mid:s.machine_id};l.push(a.mid)}for(let e=0;e<t.data.result.length;e++){let l=t.data.result[e],a={ticket_no:l.ticsrno,date:D(l.created_at),time:T(l.created_at),title:l.title,machine_id:l.machine_map,priority:l.priority,status:F(l.status),note:l.note,problem_type:l.problem_type,discription:l.description,note:l.notes};s.push(a)}d(s),b(l)}else 0===e.data.success&&console.log("hhhhhhhhh")};const S=async e=>{const t=e.currentTarget;if(e.preventDefault(),!0===t.checkValidity()){const t=new FormData(e.target);let s=await u.post("/ticket/create_ticket/",t);if(1===s.data.success)alert("Ticket is Created"),w(!1),y(!1),P(),window.location.reload();else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}}else w(!0)};function D(e){if(null!=e){var t=new Date(e),s=""+(t.getMonth()+1),l=""+t.getDate(),a=t.getFullYear();return s.length<2&&(s="0"+s),l.length<2&&(l="0"+l),[a,s,l].join("-")}}const T=e=>{if(null==e)return"          ";const t=new Date(e),s=(String(t.getDate()).padStart(2,"0"),t.getMonth(),t.getFullYear(),String(t.getHours()).padStart(2,"0")),l=String(t.getMinutes()).padStart(2,"0");return"".concat(s,":").concat(l)};function F(e){return"RESOLVED"==e?(0,c.jsx)("button",{type:"button",disabled:!0,style:{width:"75px",color:"white",backgroundColor:"#00c702"},children:"Resolved"}):"IN PROGRESS"==e?(0,c.jsx)("button",{type:"button",disabled:!0,style:{width:"75px",color:"black",backgroundColor:"yellow"},children:"In Progress"}):"PENDING"==e?(0,c.jsx)("button",{type:"button",disabled:!0,style:{width:"75px",color:"black",backgroundColor:"red"},children:"Pending"}):"CLOSED"==e?(0,c.jsx)("button",{type:"button",disabled:!0,style:{width:"75px",color:"white",backgroundColor:"green"},children:"Closed"}):(0,c.jsx)("button",{type:"button",disabled:!0,style:{width:"75px",color:"white",backgroundColor:"blue"},children:"Created"})}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,c.jsx)(r.Q_,{onClick:()=>{y(!g)},className:"mt-2",style:{backgroundColor:v,color:"white",border:"0px"},children:"Create Ticket"})}),(0,c.jsx)(r.sK,{children:(0,c.jsx)(r.UF,{xs:12,children:(0,c.jsx)(r.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",_props:{color:"secondary",className:"fw-semibold"}},{label:"Ticket No",key:"ticket_no",_props:{color:"secondary",className:"fw-semibold"}},{label:"Date",key:"date",_props:{color:"secondary",className:"fw-semibold"}},{label:"Time",key:"time",_props:{color:"secondary",className:"fw-semibold"}},{label:"Title",key:"title",_props:{color:"secondary",className:"fw-semibold"}},{label:"Machine ID",key:"machine_id",_props:{color:"secondary",className:"fw-semibold"}},{key:"status",label:"Status",_props:{color:"secondary",className:"fw-semibold"}},{key:"problem_type",label:"Problem Type",_props:{color:"secondary",className:"fw-semibold"}},{key:"discription",label:"Discription",_props:{color:"secondary",className:"fw-semibold"}}],items:s,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,t)=>(0,c.jsx)("td",{children:t+1})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})]}),(0,c.jsxs)(r.zS,{size:"lg",visible:g,onClose:()=>[y(!1),w(!1),N(!1)],children:[(0,c.jsx)(r.E4,{onClose:()=>[y(!1),w(!1),N(!1)],style:{backgroundColor:v,color:"white"},children:(0,c.jsx)(r.lb,{children:"Create Ticket"})}),(0,c.jsxs)(r.qI,{className:"needs-validation mt-4",noValidate:!0,validated:k,onSubmit:S,children:[(0,c.jsx)(r.Tc,{children:(0,c.jsxs)(r.sK,{className:"justify-content-center mx-4",children:[(0,c.jsxs)(r.sK,{sm:12,className:"",children:[(0,c.jsxs)(r.UF,{sm:12,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Title",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.OG,{type:"text",id:"title",name:"title",required:!0,pattern:"[A-Za-z\\s]+",maxLength:50}),(0,c.jsx)(r.To,{invalid:!0,children:"Please enter the title"})]}),(0,c.jsx)(r.sK,{sm:12,className:""}),(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Machine ID",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.MT,{name:"machine_map",id:"machine_map",options:p,required:!0}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Machine id"})]}),(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Problem Type",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsxs)(r.MT,{name:"problem_type",id:"problem_type",required:!0,children:[(0,c.jsx)("option",{children:"Choose..."}),(0,c.jsx)("option",{value:"software",children:"Software"}),(0,c.jsx)("option",{value:"hardware",children:"Hardware"}),(0,c.jsx)("option",{value:"other",children:"Other"})]}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Problem type "})]})]}),(0,c.jsx)(r.sK,{sm:12,className:"",children:(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Priority",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsxs)(r.MT,{name:"priority",id:"priority",required:!0,children:[(0,c.jsx)("option",{children:"Choose..."}),(0,c.jsx)("option",{value:"low",children:"Low"}),(0,c.jsx)("option",{value:"medium",children:"Medium"}),(0,c.jsx)("option",{value:"high",children:"High"})]}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Problem type "})]})}),(0,c.jsx)(r.sK,{sm:12,className:"",children:(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Description",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.Im,{type:"text",id:"description",name:"description",rows:3,required:!0,maxLength:200}),(0,c.jsx)(r.To,{invalid:!0,children:"Please enter the description"})]})})]})}),(0,c.jsxs)(r.If,{className:"mt-2 mb-2",children:[(0,c.jsx)(r.Q_,{onClick:()=>[y(!1),w(!1),N(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,c.jsx)(r.Q_,{type:"submit",style:{backgroundColor:v,color:"white"},children:"\xa0Submit"})]})]})]})]})}},94139:(e,t,s)=>{e.exports=s.p+"static/media/Feedback.bfef9234218d86b7b0ee.gif"}}]);